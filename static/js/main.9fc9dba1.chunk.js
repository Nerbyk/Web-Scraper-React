(this["webpackJsonpweb-scraper-view"]=this["webpackJsonpweb-scraper-view"]||[]).push([[0],{22:function(e){e.exports=JSON.parse('{"eshops":{"title":"E-Shop","names":["Alza"]}}')},59:function(e,t,a){e.exports=a(86)},64:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),s=(a(64),a(98)),u=a(91),o=a(92),i=a(50),m=a(93),p=a(94),E=a(20),g=a.n(E),b=a(51),d=function(){return r.a.createElement("div",null,"Check")},f=a(9),h=Object(n.createContext)(),v=function(){return Object(n.useContext)(h)},y=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(!1),o=Object(f.a)(u,2),i=o[0],m=o[1],p=Object(n.useState)("menu"),E=Object(f.a)(p,2),g=E[0],b=E[1],d=Object(n.useState)(!1),v=Object(f.a)(d,2),y=v[0],O=v[1],S=Object(n.useState)(!1),j=Object(f.a)(S,2),k=j[0],C=j[1],w=Object(n.useState)(!1),N=Object(f.a)(w,2),_=N[0],x=N[1],A=Object(n.useState)(!1),P=Object(f.a)(A,2),M=P[0],J=P[1],L=Object(n.useState)(""),D=Object(f.a)(L,2),T=D[0],R=D[1],V=Object(n.useState)(""),B=Object(f.a)(V,2),F=B[0],K=B[1];return r.a.createElement(h.Provider,{value:{menuAlert:l,setMenuAlert:s,menuSpinner:i,setMenuSpinner:m,menuStep:g,setMenuStep:b,dataAlert:y,setDataAlert:O,dataSpinner:k,setDataSpinner:C,parsing:_,setParsing:x,parsingAlert:M,setParsingAlert:J,parsingLog:T,setParsingLog:R,searchResult:F,setSearchResult:K}},t)},O=a(27),S=a(12),j=a(96),k=a(48),C=a(49),w=a(22),N=function(){var e=Object.keys(w),t=Object(n.useState)({type:"",name:"",category:"",sub_category:"",categories:"",get_categories:!1}),a=Object(f.a)(t,2),c=a[0],l=a[1],u=v(),o=u.menuAlert,m=u.setMenuAlert,p=u.setParsing,E=u.menuSpinner,d=u.setMenuSpinner,h=u.setMenuStep,y=u.setParsingLog,N=u.setParsingAlert,_=function(e){var t=e.target,a=t.value,n=t.id;if("default"===a)return l((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(O.a)({},n,""))})),void("name"===n&&l((function(e){return Object(S.a)(Object(S.a)({},e),{},{categories:""})})));l((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(O.a)({},n,a))}))};Object(n.useEffect)((function(){console.log(c),c.type&&c.name&&!c.categories&&l((function(e){return Object(S.a)(Object(S.a)({},e),{},{get_categories:!0})}))}),[c.name,c.type,c.categories]);var x=function(e){return{url:e.url,title:e.title}};return c.get_categories&&(l((function(e){return Object(S.a)(Object(S.a)({},e),{},{get_categories:!1})})),d(!0),g.a.post("https://rails-web-scraper-api.herokuapp.com/categories",{type:c.type,name:c.name,data_format:"JSON"},{withCredentials:!0}).then((function(e){console.log(e),200==e.status?(l((function(t){return Object(S.a)(Object(S.a)({},t),{},{categories:JSON.parse(e.data.categories)})})),d(!1)):m(!0)})).catch((function(e){return Promise.reject(e)}))),r.a.createElement("div",null,r.a.createElement("h3",null,"New Web Scrape"),o&&r.a.createElement(s.a,{variant:"warning"}," Something went wrong, Reload page and try again!"),r.a.createElement(j.a,null,r.a.createElement(k.a,{as:i.a},"Choose type of web site",r.a.createElement(C.a,{as:"select",defaultValue:"default",onChange:_,id:"type"},r.a.createElement("option",{value:"default",key:"default"},"Choose"),e.map((function(e){var t=w[e].title;return r.a.createElement("option",{value:e,key:t},t)})))),c.type&&r.a.createElement(k.a,{as:i.a},"Choose Name of web site",r.a.createElement(C.a,{as:"select",defaultValue:"default",onChange:_,id:"name"},r.a.createElement("option",{value:"default",key:"default"},"Choose"),w[c.type].names.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),c.categories&&r.a.createElement(k.a,{as:i.a},"Choose category of products",r.a.createElement(C.a,{as:"select",defaultValue:"default",onChange:_,id:"category"},r.a.createElement("option",{value:"default",key:"default"},"Choose"),Object.keys(c.categories).map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),c.category&&r.a.createElement(k.a,{as:i.a},"Choose sub category (Optional)",r.a.createElement(C.a,{as:"select",defaultValue:"default",onChange:_,id:"sub_category"},r.a.createElement("option",{value:"default",key:"default"},"Choose"),Object.keys(c.categories[c.category].sub_categories).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(b.a,{variant:"outline-success btn-block",className:"mt-4",onClick:function(e){h("scrapping"),p(!0),g.a.post("https://rails-web-scraper-api.herokuapp.com/parse",{type:c.type,name:c.name,data_format:"JSON",category:x(c.categories[c.category]),sub_category:c.sub_category?x(c.categories[c.category].sub_categories[c.sub_category]):""},{withCredentials:!0}).then((function(e){p(!1),N(!1),console.log(e),200==e.status?(h("scrapping"),y(e.data.log)):(h("scrapping"),m(!0))}))}},"Scrape!")),E&&r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))},_=function(){var e=v(),t=e.setMenuStep,a=e.parsing,n=e.setParsingAlert,c=e.parsingLog;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Scrapping pages..."),r.a.createElement(u.a,{className:"mt-3",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement(b.a,{variant:"outline-primary btn-block",className:"mt-4",onClick:function(){t("menu"),n(!0)}},"Go To Menu((Scrapping will proceed at background))")),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Scrapping Succeed"),r.a.createElement(b.a,{variant:"outline-success btn-block",onClick:function(){return alert(c)}},"Check Scrapping Status"),r.a.createElement(b.a,{variant:"outline-primary btn-block",onClick:function(){return t("menu")}},"Go To Menu")))},x=function(){var e=v(),t=e.menuStep,a=e.setMenuStep,n=e.setSearchResult,c=function(e){switch(e.target.id){case"new":a("scrape");break;case"existing":a("check");break;case"scrapping":a("scrapping");break;default:alert("Button doesn't exist")}};return"scrape"===t?r.a.createElement(N,null):"check"===t?r.a.createElement(d,null):"scrapping"===t?r.a.createElement(_,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Menu"),r.a.createElement(b.a,{id:"new",variant:"outline-success btn-block",onClick:c},"Scrape New Data"),r.a.createElement(b.a,{id:"existing",variant:"outline-primary btn-block",onClick:function(){g.a.post("https://rails-web-scraper-api.herokuapp.com/search",{data_format:"JSON",sub_string:"",page:1},{withCredentials:!0}).then((function(e){200==e.status&&n(e.data.result)})).catch((function(e){return Promise.reject(e)}))}},"Show All Scraped Data"),r.a.createElement(b.a,{id:"delete",variant:"outline-warning btn-block",onClick:c},"Clear Data Base"))},A=function(){return r.a.createElement("div",{className:"menu"},r.a.createElement(x,null))},P=a(95),M=a(97),J=a(99),L=function(){var e=Object.keys(w);console.log(e);var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],l=a[1],s=v(),u=s.searchResult,m=s.setSearchResult,p=Object(n.useState)(1),E=Object(f.a)(p,2),d=E[0],h=E[1],y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&e.preventDefault(),g.a.post("https://rails-web-scraper-api.herokuapp.com/search",{data_format:"JSON",sub_string:c,page:d},{withCredentials:!0}).then((function(e){200==e.status&&m(e.data.result)})).catch((function(e){return Promise.reject(e)}))};return Object(n.useEffect)((function(){d>1&&y(),0==u&&m("")}),[d]),r.a.createElement("div",{className:"pt-1"},r.a.createElement("h2",null,"Data"),r.a.createElement(j.a,{onSubmit:y},r.a.createElement(o.a,null,r.a.createElement(i.a,{sm:10},r.a.createElement(j.a.Group,{controlId:"formBasicEmail"},r.a.createElement(j.a.Control,{type:"text",placeholder:"Search",onChange:function(e){return l(e.target.value)}}),r.a.createElement(j.a.Text,{className:"text-muted"},"Search by product Name"))),r.a.createElement(i.a,{sm:2},r.a.createElement(P.a,null,r.a.createElement(P.a.Toggle,{variant:"success btn-block",id:"dropdown-basic"},"Filter"),r.a.createElement(P.a.Menu,null,r.a.createElement(P.a.Item,null,"Select Name:",r.a.createElement("select",null,e.map((function(e){return r.a.createElement("optgroup",{label:e},e,w[e].names.map((function(e){return r.a.createElement("option",null,e)})))}))))))))),u&&u.map((function(e,t){return console.log(e,t),r.a.createElement(M.a,{defaultActiveKey:"1"},r.a.createElement(J.a,{key:t+1},r.a.createElement(J.a.Header,{default:!0},r.a.createElement(M.a.Toggle,{as:b.a,variant:"link",eventKey:t+1},"".concat(e._source.title," - ").concat(e._source.price_without_vat," CZK (Click to open)"))),r.a.createElement(M.a.Collapse,{eventKey:t+1},r.a.createElement(J.a.Body,null,function(e){var t=e._source,a=t.id,n=t.eshop,c=t.title,l=t.category,s=t.sub_category,u=t.price_without_vat,o=t.price_with_vat,i=t.tax,m=t.url,p=t.image_url;return r.a.createElement("p",null,r.a.createElement("span",null,r.a.createElement("b",null,"id: "),a),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"E-Shop: "),"".concat(n)),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"category: "),l),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Sub category: "),s),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Price With Vat: "),o),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Price Without Vat: "),u),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Tax: "),i),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Link: "),r.a.createElement("a",{href:m},"Link")),r.a.createElement("br",null),r.a.createElement("img",{src:p,alt:c}),r.a.createElement("br",null))}(e)))))})),d>1&&r.a.createElement(b.a,{onClick:function(){h((function(e){return e-1}))},id:"previous",className:"mt-1"},"Previous"),0!=u.length&&r.a.createElement(b.a,{onClick:function(){h((function(e){return e+1}))},id:"next",className:"mt-1"},"Next"))};var D=function(){var e=v().parsingAlert;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"page-content"},e&&r.a.createElement(s.a,{variant:"secondary",className:"scrapping-alert"},r.a.createElement(u.a,{animation:"border",role:"status"}),r.a.createElement("span",{className:"ml-1"},"Scrapping in progress...")),r.a.createElement(o.a,{className:"justify-content-center"},r.a.createElement(i.a,{sm:4},r.a.createElement(m.a,null,r.a.createElement(p.a,{className:"p-2 text-center"},r.a.createElement(A,null)))),r.a.createElement(i.a,{sm:8},r.a.createElement(m.a,null,r.a.createElement(p.a,{className:"pt-2"},r.a.createElement(L,null)))))),r.a.createElement("footer",{className:"py-4 bg-dark text-white-50"},r.a.createElement("div",{class:"container text-center inner"},r.a.createElement("small",null,"Warning: This Application was designed for one person use. Concurrent use by several clients is not provided"))))};l.a.render(r.a.createElement(y,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.9fc9dba1.chunk.js.map